spring:
  application:
    name: FilmProject

  # PostgreSQL datasource (??????????? Testcontainers)
  datasource:
    driver-class-name: org.postgresql.Driver
    hikari:
      max-lifetime: 30000  # 30 ??????, ????? ???????? ???????? ?????????? ????????
      idle-timeout: 10000  # 10 ??????
      minimum-idle: 1      # ??????????? ?????????? ??????????
      maximum-pool-size: 5 # ???????????? ?????????? ??????????
      connection-timeout: 20000 # ??????? ?????????? (20 ??????)

  # JPA / Hibernate
  jpa:
    database-platform: org.hibernate.dialect.PostgreSQLDialect
    show-sql: true
    hibernate:
      ddl-auto: create-drop # ???????? ? ???????? ????? ??? ??????? ?????
    defer-datasource-initialization: false # ??????????, ??? ??? Flyway ?? ????????????

  # Flyway (???????? ??? ??????, ??? ??? ???? ????????? Testcontainers)
  flyway:
    enabled: false

  # MongoDB (??????????? Testcontainers)
  data:
    mongodb:
      auto-index-creation: true
    redis:
      timeout: 2000 # ??????? ??? ?????????? ? Redis (2 ???????)

  # RabbitMQ (??????????? Testcontainers)
  rabbitmq:
    username: admin
    password: secret
    publisher-confirm-type: correlated
    publisher-returns: true
    stomp:
      port: 61613 # ???? ??? STOMP, ???????? Testcontainers

  # Elasticsearch (??????????? Testcontainers)
  elasticsearch:
    uris: http://localhost:9200 # ???????????????? Testcontainers

  # ?????????? ???????? ?????? ????? data.sql
  sql:
    init:
      mode: never

  # ???????????? ??? ????????? ??????? ?????? (????????? ??? ? ???????? ?????)
  servlet:
    multipart:
      enabled: true
      max-file-size: 500MB
      max-request-size: 500MB
      file-size-threshold: 10MB
      location: ${java.io.tmpdir}

  # ???????????? Thymeleaf (???? ???????????? ? ??????)
  thymeleaf:
    prefix: classpath:/templates/
    suffix: .html

  # ????????? ??????? ??? ??????
  server:
    port: 0 # ????????? ???? ??? ??????
    tomcat:
      connection-timeout: 600000
      keep-alive-timeout: 600000
      max-keep-alive-requests: 1000
      max-http-post-size: 500MB
      max-swallow-size: 500MB
      threads:
        max: 200
        min-spare: 10
    compression:
      enabled: true
      mime-types: application/json,application/xml,text/html,text/xml,text/plain

  # ???????????? ??????????? ????????
  mvc:
    async:
      request-timeout: 600000

# JWT (??? ?????? ????? ???????????? ?????????? ??????)
jwt:
  secret: testSecretKeyForHS512AlgorithmThatIsAtLeast64BytesLongForTestingPurposes==

# ??????????? ??? ???????????
logging:
  level:
    com.zaxxer.hikari: DEBUG
    org.springframework.amqp: DEBUG
    org.springframework.messaging: DEBUG
    reactor.netty.tcp: DEBUG
    com.rabbitmq.client: DEBUG
    org.springframework.data.mongodb: DEBUG
    org.springframework.jdbc: DEBUG

